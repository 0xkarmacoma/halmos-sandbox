// SPDX-License-Identifier: MIT
pragma solidity ^0.8.15;

import "forge-std/Test.sol";
import {console2} from "forge-std/console2.sol";

import {SymTest} from "halmos-cheatcodes/SymTest.sol";

// h/t https://x.com/shoucccc/status/1833957952866447756

// initcode taken from https://etherscan.io/tx/0xbbd2cd9790fb03c9551f65a7ca06431f9e450d82bc36517ee2c013b7b43330a8
contract INUMIDeployer {
    constructor() payable {
        // nothing to do
    }

    /// @dev forwards selfbalance to the deployed contract
    function deploy() external returns (address deployAddress) {
        bytes memory deployBytecode = hex"60a0604052620000126012600a620005ae565b620000239064e8d4a51000620005c5565b60095561271060095460236200003a9190620005c5565b620000469190620005df565b600a5561271060095460236200005d9190620005c5565b620000699190620005df565b600b556103e86009546002620000809190620005c5565b6200008c9190620005df565b600c55600d805461ffff19169055600a600e819055600f55604080518082018252600580825264496e756d6960d81b602080840191909152835180850190945290835264494e554d4960d81b90830152906003620000eb83826200069e565b506004620000fa82826200069e565b50505062000117620001116200028660201b60201c565b6200028a565b737a250d5630b4cf539739df2c5dacb4c659f2488d6080819052600880547395d4dc882738af8760cb48af9fd8e350ff604d6d6001600160a01b0319918216811790925560078054909116909117905562000174906001620002db565b62000181306001620002db565b6200019061dead6001620002db565b6200019d336001620002db565b600754620001b6906001600160a01b03166001620002db565b600854620001cf906001600160a01b03166001620002db565b620001f07395d4dc882738af8760cb48af9fd8e350ff604d6d6001620002db565b620001fd3060016200030f565b6200020c61dead60016200030f565b620002193360016200030f565b60075462000232906001600160a01b031660016200030f565b6008546200024b906001600160a01b031660016200030f565b6200026c7395d4dc882738af8760cb48af9fd8e350ff604d6d60016200030f565b62000280306009546200037760201b60201c565b6200077c565b3390565b600580546001600160a01b038381166001600160a01b0319831681179093556040519116919082907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e0905f90a35050565b620002e56200043c565b6001600160a01b03919091165f908152601260205260409020805460ff1916911515919091179055565b620003196200043c565b6001600160a01b0382165f81815260116020908152604091829020805460ff191685151590811790915591519182527f9d8f7706ea1113d1a167b526eca956215946dd36cc7df39eb16180222d8b5df7910160405180910390a25050565b6001600160a01b038216620003d35760405162461bcd60e51b815260206004820152601f60248201527f45524332303a206d696e7420746f20746865207a65726f20616464726573730060448201526064015b60405180910390fd5b8060025f828254620003e6919062000766565b90915550506001600160a01b0382165f81815260208181526040808320805486019055518481527fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef910160405180910390a35050565b6005546001600160a01b03163314620004985760405162461bcd60e51b815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e65726044820152606401620003ca565b565b505050565b634e487b7160e01b5f52601160045260245ffd5b600181815b80851115620004f357815f1904821115620004d757620004d76200049f565b80851615620004e557918102915b93841c9390800290620004b8565b509250929050565b5f826200050b57506001620005a8565b816200051957505f620005a8565b81600181146200053257600281146200053d576200055d565b6001915050620005a8565b60ff8411156200055157620005516200049f565b50506001821b620005a8565b5060208310610133831016604e8410600b841016171562000582575081810a620005a8565b6200058e8383620004b3565b805f1904821115620005a457620005a46200049f565b0290505b92915050565b5f620005be60ff841683620004fb565b9392505050565b8082028115828204841417620005a857620005a86200049f565b5f82620005fa57634e487b7160e01b5f52601260045260245ffd5b500490565b634e487b7160e01b5f52604160045260245ffd5b600181811c908216806200062857607f821691505b6020821081036200064757634e487b7160e01b5f52602260045260245ffd5b50919050565b601f8211156200049a575f81815260208120601f850160051c81016020861015620006755750805b601f850160051c820191505b81811015620006965782815560010162000681565b505050505050565b81516001600160401b03811115620006ba57620006ba620005ff565b620006d281620006cb845462000613565b846200064d565b602080601f83116001811462000708575f8415620006f05750858301515b5f19600386901b1c1916600185901b17855562000696565b5f85815260208120601f198616915b82811015620007385788860151825594840194600190910190840162000717565b50858210156200075657878501515f19600388901b60f8161c191681555b5050505050600190811b01905550565b80820180821115620005a857620005a86200049f565b608051612499620007cd5f395f818161048201528181610a2b01528181610aba01528181610bed01528181610c1601528181610d0401528181611dba01528181611e710152611eb001526124995ff3fe60806040526004361061024c575f3560e01c806370a0823111610134578063a9059cbb116100b3578063ce31a06b11610078578063ce31a06b146106b2578063dd62ed3e146106c6578063e2f45605146106e5578063e47d6060146106fa578063f2fde38b14610728578063f8b45b0514610747575f80fd5b8063a9059cbb14610621578063afa4f3b214610640578063b70143c91461065f578063c02466681461067e578063c8c8ebe41461069d575f80fd5b80638da5cb5b116100f95780638da5cb5b146105935780639155e083146105b057806395d89b41146105cf5780639a7a23d6146105e3578063a457c2d714610602575f80fd5b806370a082311461050e578063715018a61461052d57806374010ece14610541578063751039fc146105605780637571336a14610574575f80fd5b806339509351116101cb57806350e218171161019057806350e2181714610452578063583e056814610471578063593c52e4146104a45780635b48dc7d146104b85780635d098b38146104d15780636ddd1713146104f0575f80fd5b8063395093511461039157806342966c68146103b057806347062402146103cf57806349bd5a5e146103e45780634fbee1931461041b575f80fd5b806323b872dd1161021157806323b872dd1461030e57806327a14fc21461032d5780632b14ca561461034c578063311028af14610361578063313ce56714610376575f80fd5b806306fdde0314610257578063095ea7b3146102815780630b78f9c0146102b057806318160ddd146102d15780631f53ac02146102ef575f80fd5b3661025357005b5f80fd5b348015610262575f80fd5b5061026b61075c565b6040516102789190612097565b60405180910390f35b34801561028c575f80fd5b506102a061029b3660046120f6565b6107ec565b6040519015158152602001610278565b3480156102bb575f80fd5b506102cf6102ca366004612120565b610805565b005b3480156102dc575f80fd5b506002545b604051908152602001610278565b3480156102fa575f80fd5b506102cf610309366004612140565b610818565b348015610319575f80fd5b506102a061032836600461215b565b610891565b348015610338575f80fd5b506102cf610347366004612199565b6108b4565b348015610357575f80fd5b506102e1600f5481565b34801561036c575f80fd5b506102e160095481565b348015610381575f80fd5b5060405160128152602001610278565b34801561039c575f80fd5b506102a06103ab3660046120f6565b61095e565b3480156103bb575f80fd5b506102cf6103ca366004612199565b61097f565b3480156103da575f80fd5b506102e1600e5481565b3480156103ef575f80fd5b50600654610403906001600160a01b031681565b6040516001600160a01b039091168152602001610278565b348015610426575f80fd5b506102a0610435366004612140565b6001600160a01b03165f9081526011602052604090205460ff1690565b34801561045d575f80fd5b506102cf61046c3660046121b0565b61098c565b34801561047c575f80fd5b506104037f000000000000000000000000000000000000000000000000000000000000000081565b3480156104af575f80fd5b506102cf6109ce565b3480156104c3575f80fd5b50600d546102a09060ff1681565b3480156104dc575f80fd5b506102cf6104eb366004612140565b610db9565b3480156104fb575f80fd5b50600d546102a090610100900460ff1681565b348015610519575f80fd5b506102e1610528366004612140565b610e2d565b348015610538575f80fd5b506102cf610e47565b34801561054c575f80fd5b506102cf61055b366004612199565b610e5a565b34801561056b575f80fd5b506102cf610f09565b34801561057f575f80fd5b506102cf61058e3660046121ec565b610f1e565b34801561059e575f80fd5b506005546001600160a01b0316610403565b3480156105bb575f80fd5b506102cf6105ca3660046121ec565b610f50565b3480156105da575f80fd5b5061026b610fc6565b3480156105ee575f80fd5b506102cf6105fd3660046121ec565b610fd5565b34801561060d575f80fd5b506102a061061c3660046120f6565b61106f565b34801561062c575f80fd5b506102a061063b3660046120f6565b6110e9565b34801561064b575f80fd5b506102cf61065a366004612199565b6110f6565b34801561066a575f80fd5b506102cf610679366004612199565b61122a565b348015610689575f80fd5b506102cf6106983660046121ec565b61127c565b3480156106a8575f80fd5b506102e1600b5481565b3480156106bd575f80fd5b506102cf6112e2565b3480156106d1575f80fd5b506102e16106e0366004612223565b611372565b3480156106f0575f80fd5b506102e1600c5481565b348015610705575f80fd5b506102a0610714366004612140565b60106020525f908152604090205460ff1681565b348015610733575f80fd5b506102cf610742366004612140565b61139c565b348015610752575f80fd5b506102e1600a5481565b60606003805461076b9061224f565b80601f01602080910402602001604051908101604052809291908181526020018280546107979061224f565b80156107e25780601f106107b9576101008083540402835291602001916107e2565b820191905f5260205f20905b8154815290600101906020018083116107c557829003601f168201915b5050505050905090565b5f336107f9818585611412565b60019150505b92915050565b61080d611535565b600e91909155600f55565b6001600160a01b0381166108465760405163f0d401fb60e01b81525f60048201526024015b60405180910390fd5b600780546001600160a01b0319166001600160a01b03831690811790915560405181907f2832c6a31c4dcad161b6004200ed49c5e5bd55a4d3ed7930c8e8f1075cee49fe905f90a350565b5f3361089e85828561158f565b6108a9858585611607565b506001949350505050565b670de0b6b3a76400006127106108c960025490565b6108d490600161229b565b6108de91906122b2565b6108e891906122b2565b8110156109465760405162461bcd60e51b815260206004820152602660248201527f43616e6e6f7420736574206d61782077616c6c6574206c6f776572207468616e60448201526520302e30312560d01b606482015260840161083d565b61095881670de0b6b3a764000061229b565b600a5550565b5f336107f98185856109708383611372565b61097a91906122d1565b611412565b6109893382611b91565b50565b610994611535565b600e849055600f8390556109b082670de0b6b3a764000061229b565b600a556109c581670de0b6b3a764000061229b565b600b5550505050565b6109d6611535565b600d5460ff1615610a295760405162461bcd60e51b815260206004820152601760248201527f54726164696e6720697320616c7265616479206f70656e000000000000000000604482015260640161083d565b7f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031663c45a01556040518163ffffffff1660e01b8152600401602060405180830381865afa158015610a85573d5f803e3d5ffd5b505050506040513d601f19601f82011682018060405250810190610aa991906122e4565b6001600160a01b031663c9c65396307f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031663ad5c46486040518163ffffffff1660e01b8152600401602060405180830381865afa158015610b14573d5f803e3d5ffd5b505050506040513d601f19601f82011682018060405250810190610b3891906122e4565b6040516001600160e01b031960e085901b1681526001600160a01b039283166004820152911660248201526044016020604051808303815f875af1158015610b82573d5f803e3d5ffd5b505050506040513d601f19601f82011682018060405250810190610ba691906122e4565b600680546001600160a01b0319166001600160a01b03929092169182179055610bd0906001610f1e565b600654610be7906001600160a01b03166001611cc1565b610c14307f0000000000000000000000000000000000000000000000000000000000000000600954611412565b7f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031663f305d7194730610c4e30610e2d565b6040516001600160e01b031960e086901b1681526001600160a01b03909216600483015260248201525f6044820181905260648201527395d4dc882738af8760cb48af9fd8e350ff604d6d60848201524260a482015260c40160606040518083038185885af1158015610cc3573d5f803e3d5ffd5b50505050506040513d601f19601f82011682018060405250810190610ce891906122ff565b505060065460405163095ea7b360e01b81526001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000811660048301525f196024830152909116915063095ea7b3906044016020604051808303815f875af1158015610d5b573d5f803e3d5ffd5b505050506040513d601f19601f82011682018060405250810190610d7f919061232a565b50600d805461ffff19166101011790556040517f584b485ffe4630aeca9f8dc1953541758afb20b42b7e1d6e7e6d0f164101a8e3905f90a1565b6001600160a01b038116610de25760405163f0d401fb60e01b81525f600482015260240161083d565b600880546001600160a01b0319166001600160a01b03831690811790915560405181907f7f645b8ba9af1a8a3cc751f36952ca80e7f26ae7d47d0ee9f4a60defc1e680d6905f90a350565b6001600160a01b03165f9081526020819052604090205490565b610e4f611535565b610e585f611d14565b565b670de0b6b3a7640000612710610e6f60025490565b610e7a90600161229b565b610e8491906122b2565b610e8e91906122b2565b811015610ef15760405162461bcd60e51b815260206004820152602b60248201527f43616e6e6f7420736574206d6178207472616e73616374696f6e206c6f77657260448201526a207468616e20302e30312560a81b606482015260840161083d565b610f0381670de0b6b3a764000061229b565b600b5550565b610f11611535565b600954600b819055600a55565b610f26611535565b6001600160a01b03919091165f908152601260205260409020805460ff1916911515919091179055565b610f58611535565b6001600160a01b0382165f9081526010602052604090205481151560ff909116151503610f9c576040516312319ea960e11b8152811515600482015260240161083d565b6001600160a01b03919091165f908152601060205260409020805460ff1916911515919091179055565b60606004805461076b9061224f565b610fdd611535565b6006546001600160a01b03908116908316036110615760405162461bcd60e51b815260206004820152603960248201527f54686520706169722063616e6e6f742062652072656d6f7665642066726f6d2060448201527f6175746f6d617465644d61726b65744d616b6572506169727300000000000000606482015260840161083d565b61106b8282611cc1565b5050565b5f338161107c8286611372565b9050838110156110dc5760405162461bcd60e51b815260206004820152602560248201527f45524332303a2064656372656173656420616c6c6f77616e63652062656c6f77604482015264207a65726f60d81b606482015260840161083d565b6108a98286868403611412565b5f336107f9818585611607565b620186a061110360025490565b61110e90600161229b565b61111891906122b2565b8110156111855760405162461bcd60e51b815260206004820152603560248201527f5377617020616d6f756e742063616e6e6f74206265206c6f776572207468616e60448201527420302e30303125206f662074686520737570706c7960581b606482015260840161083d565b6103e861119160025490565b61119c90600561229b565b6111a691906122b2565b8111156112125760405162461bcd60e51b815260206004820152603460248201527f5377617020616d6f756e742063616e6e6f7420626520686967686572207468616044820152736e20302e3525206f662074686520737570706c7960601b606482015260840161083d565b61122481670de0b6b3a764000061229b565b600c5550565b6008546001600160a01b0316336001600160a01b031614611249575f80fd5b5f61125330610e2d565b90505f6064611262848461229b565b61126c91906122b2565b905061127781611d65565b505050565b611284611535565b6001600160a01b0382165f81815260116020908152604091829020805460ff191685151590811790915591519182527f9d8f7706ea1113d1a167b526eca956215946dd36cc7df39eb16180222d8b5df7910160405180910390a25050565b5f471161132a5760405162461bcd60e51b81526020600482015260166024820152752a37b5b2b71d1037379022aa24103a379031b632b0b960511b604482015260640161083d565b6008546001600160a01b0316336001600160a01b031614611349575f80fd5b60405133904780156108fc02915f818181858888f19350505050158015610989573d5f803e3d5ffd5b6001600160a01b039182165f90815260016020908152604080832093909416825291909152205490565b6113a4611535565b6001600160a01b0381166114095760405162461bcd60e51b815260206004820152602660248201527f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160448201526564647265737360d01b606482015260840161083d565b61098981611d14565b6001600160a01b0383166114745760405162461bcd60e51b8152602060048201526024808201527f45524332303a20617070726f76652066726f6d20746865207a65726f206164646044820152637265737360e01b606482015260840161083d565b6001600160a01b0382166114d55760405162461bcd60e51b815260206004820152602260248201527f45524332303a20617070726f766520746f20746865207a65726f206164647265604482015261737360f01b606482015260840161083d565b6001600160a01b038381165f8181526001602090815260408083209487168084529482529182902085905590518481527f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925910160405180910390a3505050565b6005546001600160a01b03163314610e585760405162461bcd60e51b815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572604482015260640161083d565b5f61159a8484611372565b90505f19811461160157818110156115f45760405162461bcd60e51b815260206004820152601d60248201527f45524332303a20696e73756666696369656e7420616c6c6f77616e6365000000604482015260640161083d565b6116018484848403611412565b50505050565b6001600160a01b03831661162d5760405162461bcd60e51b815260040161083d90612345565b6001600160a01b0382166116535760405162461bcd60e51b815260040161083d9061238a565b805f036116655761127783835f611f22565b6005546001600160a01b0384811691161480159061169157506005546001600160a01b03838116911614155b80156116a557506001600160a01b03821615155b80156116bc57506001600160a01b03821661dead14155b80156116d25750600854600160a01b900460ff16155b156119a457600d5460ff16611763576001600160a01b0383165f9081526011602052604090205460ff168061171e57506001600160a01b0382165f9081526011602052604090205460ff165b6117635760405162461bcd60e51b81526020600482015260166024820152752a3930b234b7339034b9903737ba1030b1ba34bb329760511b604482015260640161083d565b6001600160a01b0383165f9081526013602052604090205460ff1680156117a257506001600160a01b0382165f9081526012602052604090205460ff16155b1561187657600b548111156118175760405162461bcd60e51b815260206004820152603560248201527f427579207472616e7366657220616d6f756e742065786365656473207468652060448201527436b0bc2a3930b739b0b1ba34b7b720b6b7bab73a1760591b606482015260840161083d565b600a5461182383610e2d565b61182d90836122d1565b11156118715760405162461bcd60e51b815260206004820152601360248201527213585e081dd85b1b195d08195e18d959591959606a1b604482015260640161083d565b6119a4565b6001600160a01b0382165f9081526013602052604090205460ff1680156118b557506001600160a01b0383165f9081526012602052604090205460ff16155b1561192b57600b548111156118715760405162461bcd60e51b815260206004820152603660248201527f53656c6c207472616e7366657220616d6f756e742065786365656473207468656044820152751036b0bc2a3930b739b0b1ba34b7b720b6b7bab73a1760511b606482015260840161083d565b6001600160a01b0382165f9081526012602052604090205460ff166119a457600a5461195683610e2d565b61196090836122d1565b11156119a45760405162461bcd60e51b815260206004820152601360248201527213585e081dd85b1b195d08195e18d959591959606a1b604482015260640161083d565b5f6119ae30610e2d565b600c5490915081118080156119ca5750600d54610100900460ff165b80156119e05750600854600160a01b900460ff16155b8015611a0457506001600160a01b0385165f9081526013602052604090205460ff16155b8015611a2857506001600160a01b0385165f9081526011602052604090205460ff16155b8015611a4c57506001600160a01b0384165f9081526011602052604090205460ff16155b15611a7a576008805460ff60a01b1916600160a01b179055611a6c61204a565b6008805460ff60a01b191690555b6008545f90600160a01b900460ff16158015611aae57506001600160a01b0386165f9081526011602052604090205460ff16155b8015611ad257506001600160a01b0385165f9081526011602052604090205460ff16155b90505f8115611b7d576001600160a01b0386165f9081526013602052604090205460ff1615611b2257611b1b6064611b15600f548861207a90919063ffffffff16565b9061208c565b9050611b5f565b6001600160a01b0387165f9081526013602052604090205460ff1615611b5f57611b5c6064611b15600e548861207a90919063ffffffff16565b90505b8015611b7057611b70873083611f22565b611b7a81866123cd565b94505b611b88878787611f22565b50505050505050565b6001600160a01b038216611bf15760405162461bcd60e51b815260206004820152602160248201527f45524332303a206275726e2066726f6d20746865207a65726f206164647265736044820152607360f81b606482015260840161083d565b6001600160a01b0382165f9081526020819052604090205481811015611c645760405162461bcd60e51b815260206004820152602260248201527f45524332303a206275726e20616d6f756e7420657863656564732062616c616e604482015261636560f01b606482015260840161083d565b6001600160a01b0383165f818152602081815260408083208686039055600280548790039055518581529192917fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef910160405180910390a3505050565b6001600160a01b0382165f81815260136020526040808220805460ff191685151590811790915590519092917fffa9187bf1f18bf477bd0ea1bcbb64e93b6a98132473929edfce215cd9b16fab91a35050565b600580546001600160a01b038381166001600160a01b0319831681179093556040519116919082907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e0905f90a35050565b6040805160028082526060820183525f9260208301908036833701905050905030815f81518110611d9857611d986123e0565b60200260200101906001600160a01b031690816001600160a01b0316815250507f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031663ad5c46486040518163ffffffff1660e01b8152600401602060405180830381865afa158015611e14573d5f803e3d5ffd5b505050506040513d601f19601f82011682018060405250810190611e3891906122e4565b81600181518110611e4b57611e4b6123e0565b60200260200101906001600160a01b031690816001600160a01b031681525050611e96307f000000000000000000000000000000000000000000000000000000000000000084611412565b60085460405163791ac94760e01b81526001600160a01b037f000000000000000000000000000000000000000000000000000000000000000081169263791ac94792611ef19287925f928892919091169042906004016123f4565b5f604051808303815f87803b158015611f08575f80fd5b505af1158015611f1a573d5f803e3d5ffd5b505050505050565b6001600160a01b038316611f485760405162461bcd60e51b815260040161083d90612345565b6001600160a01b038216611f6e5760405162461bcd60e51b815260040161083d9061238a565b6001600160a01b0383165f9081526020819052604090205481811015611fe55760405162461bcd60e51b815260206004820152602660248201527f45524332303a207472616e7366657220616d6f756e7420657863656564732062604482015265616c616e636560d01b606482015260840161083d565b6001600160a01b038481165f81815260208181526040808320878703905593871680835291849020805487019055925185815290927fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef910160405180910390a3611601565b5f61205430610e2d565b9050805f036120605750565b600c5481908111156120715750600c545b61106b81611d65565b5f612085828461229b565b9392505050565b5f61208582846122b2565b5f6020808352835180828501525f5b818110156120c2578581018301518582016040015282016120a6565b505f604082860101526040601f19601f8301168501019250505092915050565b6001600160a01b0381168114610989575f80fd5b5f8060408385031215612107575f80fd5b8235612112816120e2565b946020939093013593505050565b5f8060408385031215612131575f80fd5b50508035926020909101359150565b5f60208284031215612150575f80fd5b8135612085816120e2565b5f805f6060848603121561216d575f80fd5b8335612178816120e2565b92506020840135612188816120e2565b929592945050506040919091013590565b5f602082840312156121a9575f80fd5b5035919050565b5f805f80608085870312156121c3575f80fd5b5050823594602084013594506040840135936060013592509050565b8015158114610989575f80fd5b5f80604083850312156121fd575f80fd5b8235612208816120e2565b91506020830135612218816121df565b809150509250929050565b5f8060408385031215612234575f80fd5b823561223f816120e2565b91506020830135612218816120e2565b600181811c9082168061226357607f821691505b60208210810361228157634e487b7160e01b5f52602260045260245ffd5b50919050565b634e487b7160e01b5f52601160045260245ffd5b80820281158282048414176107ff576107ff612287565b5f826122cc57634e487b7160e01b5f52601260045260245ffd5b500490565b808201808211156107ff576107ff612287565b5f602082840312156122f4575f80fd5b8151612085816120e2565b5f805f60608486031215612311575f80fd5b8351925060208401519150604084015190509250925092565b5f6020828403121561233a575f80fd5b8151612085816121df565b60208082526025908201527f45524332303a207472616e736665722066726f6d20746865207a65726f206164604082015264647265737360d81b606082015260800190565b60208082526023908201527f45524332303a207472616e7366657220746f20746865207a65726f206164647260408201526265737360e81b606082015260800190565b818103818111156107ff576107ff612287565b634e487b7160e01b5f52603260045260245ffd5b5f60a082018783526020878185015260a0604085015281875180845260c08601915082890193505f5b818110156124425784516001600160a01b03168352938301939183019160010161241d565b50506001600160a01b0396909616606085015250505060800152939250505056fea2646970667358221220763af1e2398f975cec546f46cd7232cb202f9eb2e45c043df31ee01ffbee958464736f6c63430008140033";

        assembly {
            let initcodeLen := mload(deployBytecode)
            let initcodePtr := add(deployBytecode, 0x20)
            deployAddress := create(selfbalance(), initcodePtr, initcodeLen)
        }
    }
}

contract Test94 is Test, SymTest {
    address targetAddr;

    function setUp() public {
        vm.deal(address(this), 5 ether);

        INUMIDeployer deployer = new INUMIDeployer{value: 5 ether}();
        targetAddr = deployer.deploy();

        // sanity checks
        assert(targetAddr.code.length == 9369);
        assert(targetAddr.balance > 0);
    }

    receive() external payable {
        console.log("receive() called");
        console.log(msg.value);
    }

    fallback() external payable {
        console.log("fallback() called");
        console.log(msg.value);
    }

    function doAnythingNow() internal {
        bytes memory data = svm.createBytes(100, "calldata");
        (bool success, ) = targetAddr.call(data);
        vm.assume(success);
    }

    function test_inumi_k1() external {
        // precondition: we start with no ether
        vm.deal(address(this), 0);

        doAnythingNow();

        // postcondition: success if we can profit
        assert(address(this).balance == 0);
    }

    // Counterexample:
    //     halmos_calldata_bytes_01 = 0x5d098b380000000000000000000000007fa9385be102ac3eac297483dd6233d62b3e149600...00 (100 bytes)
    //     halmos_calldata_bytes_02 = 0xce31a06b000000000000000000000000000000000000000000000000000000000000000000...00 (100 bytes)
    // [FAIL] test_inumi_k2() (paths: 1100, time: 62.23s (paths: 62.23s, models: 0.00s), bounds: [])
    function test_inumi_k2() external {
        // precondition: we start with no ether
        vm.deal(address(this), 0);

        doAnythingNow();
        doAnythingNow();

        // postcondition: success if we can profit
        assert(address(this).balance == 0);
    }
}
